<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CareOnCall Carwash</title>
    <link rel="stylesheet" href="services.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <script defer>
        function calcTotal() {
            const prices = {
                bike: 80,
                sedan: 100,
                suv: 180,
                minibus: 220
            };
            const total = 
                (document.getElementById('bike').value * prices.bike) +
                (document.getElementById('sedan').value * prices.sedan) +
                (document.getElementById('suv').value * prices.suv) +
                (document.getElementById('minibus').value * prices.minibus);
            document.getElementById('totalCalc').innerText = total.toFixed(2);
            return total;
        }
    
        function storeTotal() {
            const total = calcTotal();
            document.getElementById('amount').value = total.toFixed(2);
    
            // Show the PayFast form
            document.getElementById('payfast-form').style.display = 'block';
    
            // Submit the form
            document.getElementById('payfast-form').submit();
        }
    </script>
    
</head>

<body>
    <!-- Navigation Bar -->
    <nav>
        <ul class="navigationbar">
            <h2><a href="index.html" class="homelink">Care<span>OnCall</span></a></h2>
            <li><a href="login.html" class="logout">Logout</a></li>
            <li><a href="index.html#getservices">Services</a></li>
            <li><a href="index.html">Home</a></li>
        </ul>
    </nav>

    <!-- Car Wash Section -->
    <section class="carwash">
        <h1>CAR WASH</h1>
    </section>

    <!-- Services Section -->
    <section class="services">
        <!-- Service Items -->
        <div class="our-services">
            <img src="img/view-cool-motorcycle.avif" alt="Motorbike" class="gallery">
            <div class="home-container"><h3>Motorbike - R80.00</h3></div>
        </div>
        <div class="our-services">
            <img src="img/3d-car.avif" alt="Sedan" class="gallery" height="150">
            <div class="home-container"><h3>Sedan - R100.00</h3></div>
        </div>
        <div class="our-services">
            <img src="img/view-3d-car.avif" alt="SUV" class="gallery">
            <div class="home-container"><h3>SUV - R180.00</h3></div>
        </div>
        <div class="our-services">
            <img src="img/Mercedes-Benz-V-Class-Black-Crystal-Larte.webp" alt="Minibus" class="gallery">
            <div class="home-container"><h3>Minibus - R220.00</h3></div>
        </div>
    </section>

    <!-- Cart Form -->
    <form class="myform">
        <table class="carwash-table">
            <tr><th colspan="2">CART</th></tr>
            <tr>
                <td>Motorbike</td>
                <td><select class="price" onchange="calcTotal()" id="bike">
                    <option value="0">0</option><option value="1">1</option>
                    <option value="2">2</option><option value="3">3</option>
                    <option value="4">4</option><option value="5">5</option>
                </select></td>
            </tr>
            <tr>
                <td>Sedan</td>
                <td><select class="price" onchange="calcTotal()" id="sedan">
                    <option value="0">0</option><option value="1">1</option>
                    <option value="2">2</option><option value="3">3</option>
                    <option value="4">4</option><option value="5">5</option>
                </select></td>
            </tr>
            <tr>
                <td>SUV</td>
                <td><select class="price" onchange="calcTotal()" id="suv">
                    <option value="0">0</option><option value="1">1</option>
                    <option value="2">2</option><option value="3">3</option>
                    <option value="4">4</option><option value="5">5</option>
                </select></td>
            </tr>
            <tr>
                <td>Minibus</td>
                <td><select class="price" onchange="calcTotal()" id="minibus">
                    <option value="0">0</option><option value="1">1</option>
                    <option value="2">2</option><option value="3">3</option>
                    <option value="4">4</option><option value="5">5</option>
                </select></td>
            </tr>
        </table>

        <!-- Total Calculation -->
        <table class="total-table">
            <tr>
                <th>TOTAL</th>
                <th>R<span id="totalCalc">0.00</span></th>
            </tr>
        </table>

        <!-- Checkout Button -->
        <div class="checkout">
            <button type="button" class="button" onclick="storeTotal()">Checkout</button>
        </div>
    </form>

    <!-- PayFast Form -->
    <form id="payfast-form" action="https://www.payfast.co.za/eng/process" method="post" style="display:none;">
        <input type="hidden" name="merchant_id" id="merchant_id" value="25607769">
        <input type="hidden" name="merchant_key" id="merchant_key" value="ghpvvcpsvldhv">
        <input type="hidden" name="return_url" id="return_url" value="https://careoncallserv.netlify.app/return">
        <input type="hidden" name="cancel_url" id="cancel_url" value="https://careoncallserv.netlify.app/cancel">
        <input type="hidden" name="item_name" id="item_name" value="car-wash-services">
        <input type="hidden" name="amount" id="amount" value="0.00">
        <button type="submit" id="pay-now-button">Pay Now</button>
    </form>

</body>
</html>
